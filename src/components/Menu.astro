---
import StaggeredMenu from '@/premade/menu';
import { StarsBackground } from '@/premade/stars';

const menuItems = [
  { label: 'Principal', ariaLabel: 'Go to home page', link: '/' },
  { label: 'Sobre m√≠', ariaLabel: 'Learn about us', link: '/about' },
  { label: 'Proyectos', ariaLabel: 'View our services', link: '/services' },
  { label: 'Contacto', ariaLabel: 'Get in touch', link: '/contact' }
];

const socialItems = [
  { label: 'Twitter', link: 'https://twitter.com' },
  { label: 'GitHub', link: 'https://github.com' },
  { label: 'LinkedIn', link: 'https://linkedin.com' }
];
---

<div style={{ position: 'fixed', top: 0, left: 0, height: '100vh', width: '100vw', zIndex: 50, pointerEvents: 'none' }}>
  <div style={{ pointerEvents: 'auto' }}>
    <StaggeredMenu 
      client:load
      position="left"
      items={menuItems}
      socialItems={socialItems}
      displaySocials={true}
      displayItemNumbering={true}
      menuButtonColor="#f5f0f0"
      openMenuButtonColor="#f5f0f0"
      changeMenuColorOnOpen={true}
      colors={['#fd6368', '#f5f0f0']}
      accentColor="#ff6b6b"
    />
  </div>
</div>



<StarsBackground
  client:load
  className="fixed inset-0 w-full h-full -z-10"
  factor={0.05}
  speed={80}
  pointerEvents={false}
  count1={1000}
  count2={240}
  count3={100}
  starOpacity={0.2}
/>

<section class="h-screen w-screen flex items-end relative overflow-hidden z-0" style="background: transparent;">
  <div class="w-full p-4 pb-6 relative z-10">
    <div id="fit-container" class="w-full overflow-hidden">
      <h1 id="fit-text" class="inline-block font-extrabold leading-none drop-shadow-lg bg-gradient-to-r from-text via-primary to-text bg-clip-text text-transparent font-modamode tracking-tight select-none">
        GABRIEL ALMARCHA
      </h1>
    </div>
  </div>
</section>

<script>
  const fit = () => {
    const container = document.getElementById('fit-container');
    const text = document.getElementById('fit-text');
    if (!container || !text) return;
    text.style.transform = 'none';
    text.style.fontSize = '10px';
    text.style.whiteSpace = 'nowrap';
    text.style.display = 'inline-block';
    text.style.transformOrigin = 'left bottom';
    const base = container.clientWidth || window.innerWidth || 1000;
    text.style.fontSize = base + 'px';
    const textWidth = text.scrollWidth || text.offsetWidth;
    if (!textWidth) return;
    const scale = (container.clientWidth - 1) / textWidth;
    text.style.transform = `scale(${scale})`;
  };
  const initFit = () => {
    fit();
    const container = document.getElementById('fit-container');
    if (container && 'ResizeObserver' in window) {
      new ResizeObserver(fit).observe(container);
    }
    window.addEventListener('resize', fit);
  };
  if (document.readyState !== 'loading') {
    initFit();
  } else {
    document.addEventListener('DOMContentLoaded', initFit);
  }
</script>